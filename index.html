<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>App Recettes Kawaii ğŸŒ¸ğŸ°</title>

<link rel="icon" href="icon.png" type="image/png">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ff69b4">

<style>
body {
    font-family: 'Comic Sans MS', cursive, sans-serif;
    margin: 0;
    background: url('https://i.imgur.com/2WZtOD6.png'), 
    linear-gradient(-45deg,#ffdee9,#b5fffc,#fff0f5,#ffe4e1);
    background-size: cover;
    animation: gradient 15s ease infinite;
}

@keyframes gradient {
    0%{background-position:0% 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 50%;}
}

.container {
    max-width: 500px;
    margin: 30px auto;
    padding: 20px;
}

button{
    padding:10px;
    border:none;
    border-radius:15px;
    background-color:#ffb6c1;
    color:white;
    font-size:16px;
    cursor:pointer;
    margin:5px 0;
    box-shadow:0 5px 12px rgba(255,182,193,0.6);
    transition: 0.2s;
}

button:hover{
    background-color:#ff69b4;
    transform: scale(1.05) rotate(-2deg);
}

input, textarea{
    width:100%;
    padding:10px;
    border-radius:12px;
    border:2px solid #ffb6c1;
    margin:5px 0;
    background-color:#fffaf0;
    font-size:16px;
}

.recipe-card{
    background-color:#ffe4e1;
    border-radius:15px;
    padding:15px;
    margin:10px 0;
    box-shadow:0 5px 10px rgba(0,0,0,0.05);
    position:relative;
    animation: pop 0.4s ease;
}

@keyframes pop{
  from{transform:scale(0.9);opacity:0;}
  to{transform:scale(1);opacity:1;}
}

.recipe-card img{
    width:100%;
    margin-bottom:10px;
    clip-path: path("M150 30 C120 -10, 0 40, 150 190 C300 40, 180 -10, 150 30 Z");
    box-shadow: 0 5px 15px rgba(255,105,180,0.4);
}

.delete-btn{
    position:absolute;
    top:10px;
    right:10px;
    background-color:#ff69b4;
    color:white;
    border:none;
    border-radius:50%;
    cursor:pointer;
    padding:5px 10px;
}

.delete-btn:hover{transform:scale(1.2);}

.edit-btn{
    position:absolute;
    top:10px;
    right:50px;
    background-color:#ffb6c1;
    border:none;
    border-radius:50%;
    padding:5px 10px;
    cursor:pointer;
}

.confetti{
    position:absolute;
    width:10px;height:10px;
    border-radius:50%;
    pointer-events:none;
    animation:fall 2s linear forwards;
}

@keyframes fall{
    0%{transform:translateY(0) rotate(0deg);opacity:1;}
    100%{transform:translateY(400px) rotate(360deg);opacity:0;}
}

#imagePreview{
    border:3px dashed #ffb6c1;
    box-shadow:0 5px 10px rgba(255,182,193,0.3);
}
</style>
</head>
<body>

<div class="container">

<!-- PAGE ACCUEIL -->
<div id="homePage">
    <h1 style="text-align:center;color:#ff69b4;">ğŸŒ¸ App Recettes Kawaii ğŸ°</h1>

    <img src="https://i.imgur.com/YW3WcYJ.png" style="width:130px;display:block;margin:auto;">
    <p style="text-align:center;color:#ff69b4;">ğŸ‘Ÿ Sneakers Kawaii Mode</p>

    <button onclick="showPage('addPage')">â• Ajouter Recette</button>
    <button onclick="showPage('listPage')">ğŸ“– Mes Recettes</button>
</div>

<!-- PAGE AJOUT -->
<div id="addPage" style="display:none;">
    <h2 style="color:#ff69b4;">Ajouter / Modifier une Recette</h2>
    <input type="text" id="title" placeholder="Nom du plat ğŸ°">
    <input type="text" id="category" placeholder="CatÃ©gorie ğŸ¥—">
    <input type="text" id="prepTime" placeholder="Temps de prÃ©paration â±ï¸">
    <input type="text" id="cookTime" placeholder="Temps de cuisson â±ï¸">
    <textarea id="ingredients" rows="3" placeholder="IngrÃ©dients ğŸ“"></textarea>
    <textarea id="instructions" rows="4" placeholder="Instructions âœ¨"></textarea>
    <textarea id="notes" rows="2" placeholder="Notes ğŸ§¸"></textarea>
    <input type="file" id="image" accept="image/*" onchange="previewImage(event)">
    <img id="imagePreview" src="" style="display:none;">
    <button onclick="addRecipe()">ğŸ’– Enregistrer</button>
    <button onclick="showPage('homePage')">ğŸ  Retour</button>
</div>

<!-- PAGE LISTE -->
<div id="listPage" style="display:none;">
    <h2 style="color:#ff69b4;">Mes Recettes ğŸŒ¸</h2>
    <button onclick="deleteAllRecipes()" style="background-color:#ff7f7f;">ğŸ—‘ï¸ Supprimer toutes</button>
    <div id="recipesList"></div>
    <button onclick="showPage('homePage')">ğŸ  Retour</button>
</div>

</div>

<script>
let recipes = [];
let editIndex = null;

window.onload = () => {
    const saved = localStorage.getItem('recipes');
    if(saved) recipes = JSON.parse(saved);
    recipes.forEach(r => renderRecipe(r));
};

function showPage(pageId){
    document.getElementById('homePage').style.display='none';
    document.getElementById('addPage').style.display='none';
    document.getElementById('listPage').style.display='none';
    document.getElementById(pageId).style.display='block';
}

function previewImage(event){
    const preview = document.getElementById('imagePreview');
    const file = event.target.files[0];
    if(file){
        const reader = new FileReader();
        reader.onload = e => {
            preview.src = e.target.result;
            preview.style.display = 'block';
        }
        reader.readAsDataURL(file);
    } else {
        preview.src = '';
        preview.style.display = 'none';
    }
}

function addRecipe(){
    const title=document.getElementById('title').value.trim();
    const category=document.getElementById('category').value.trim();
    const prep=document.getElementById('prepTime').value.trim();
    const cook=document.getElementById('cookTime').value.trim();
    const ingredients=document.getElementById('ingredients').value.trim();
    const instructions=document.getElementById('instructions').value.trim();
    const notes=document.getElementById('notes').value.trim();
    const imageInput=document.getElementById('image');

    if(!title || !ingredients) return alert("Ø§ÙƒØªØ¨ÙŠ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù…ÙƒÙˆÙ†Ø§Øª ğŸ’–");

    const reader = new FileReader();
    reader.onload = function(e){
        const imageData = imageInput.files[0] ? e.target.result : null;

        const recipe = { title, category, prep, cook, ingredients, instructions, notes, imageData };

        if(editIndex !== null){
            recipes[editIndex] = recipe;
            editIndex = null;
        } else {
            recipes.unshift(recipe);
        }

        localStorage.setItem('recipes', JSON.stringify(recipes));
        refreshList();

        for(let i=0;i<20;i++) createConfetti();

        document.querySelectorAll('#addPage input, #addPage textarea').forEach(el => el.value = '');
        document.getElementById('imagePreview').style.display = 'none';

        showPage('listPage');
    };

    if(imageInput.files[0]) reader.readAsDataURL(imageInput.files[0]);
    else reader.onload({target:{result:null}});
}

function refreshList(){
    document.getElementById('recipesList').innerHTML='';
    recipes.forEach(r => renderRecipe(r));
}

function renderRecipe(recipe){
    const card=document.createElement('div');
    card.className='recipe-card';

    let imageHTML = recipe.imageData ? `<img src="${recipe.imageData}">` : '';

    card.innerHTML = imageHTML +
        `<strong>ğŸ“ ${recipe.title}</strong><br>
        <em>CatÃ©gorie:</em> ${recipe.category}<br>
        <em>Prep:</em> ${recipe.prep} | <em>Cook:</em> ${recipe.cook}<br><br>
        <strong>IngrÃ©dients:</strong><br>${recipe.ingredients.replace(/\n/g,'<br>')}<br><br>
        <strong>Instructions:</strong><br>${(recipe.instructions || '').replace(/\n/g,'<br>')}<br><br>
        <strong>Notes:</strong><br>${(recipe.notes || '').replace(/\n/g,'<br>')}`;

    const delBtn=document.createElement('button');
    delBtn.className='delete-btn';
    delBtn.textContent='âŒ';
    delBtn.onclick=()=>{
        recipes = recipes.filter(r => r !== recipe);
        localStorage.setItem('recipes', JSON.stringify(recipes));
        refreshList();
    };

    const editBtn=document.createElement('button');
    editBtn.className='edit-btn';
    editBtn.textContent='âœï¸';
    editBtn.onclick=()=>{
        editIndex = recipes.indexOf(recipe);
        showPage('addPage');
        document.getElementById('title').value = recipe.title;
        document.getElementById('category').value = recipe.category;
        document.getElementById('prepTime').value = recipe.prep;
        document.getElementById('cookTime').value = recipe.cook;
        document.getElementById('ingredients').value = recipe.ingredients;
        document.getElementById('instructions').value = recipe.instructions;
        document.getElementById('notes').value = recipe.notes;
        document.getElementById('imagePreview').src = recipe.imageData || '';
        document.getElementById('imagePreview').style.display = recipe.imageData ? 'block' : 'none';
    };

    card.appendChild(delBtn);
    card.appendChild(editBtn);
    document.getElementById('recipesList').appendChild(card);
}

function deleteAllRecipes(){
    if(confirm('Ø­Ø§Ø¨Ø© ØªÙ…Ø³Ø­ÙŠ ÙƒÙ„ Ø§Ù„ÙˆØµÙØ§ØªØŸ ğŸŒ¸')){
        recipes = [];
        localStorage.removeItem('recipes');
        refreshList();
    }
}

function createConfetti(){
    const container=document.querySelector('.container');
    const confetti=document.createElement('div');
    confetti.className='confetti';
    confetti.style.left=Math.random()*480+'px';
    confetti.style.backgroundColor=randomColor();
    container.appendChild(confetti);
    setTimeout(()=>confetti.remove(),2000);
}

function randomColor(){
    const colors=['#ff69b4','#ffb6c1','#ffdab9','#fff0f5','#b5fffc','#ffe4e1'];
    return colors[Math.floor(Math.random()*colors.length)];
}
</script>

</body>
  </html>
